@model WebZootecPro.ViewModels.Usuario.LoginViewModel
@{
ViewData["Title"] = "Iniciar sesión";
Layout = "_Layout";
ViewBag.BodyClass = "auth-body";
ViewBag.HideNavbar = true; // ocultar navbar en login
}

<div class="auth-wrapper">
  <div class="card auth-card shadow-lg">
    <div class="card-body p-4 p-md-5">
      <div class="text-center mb-4">
        <div class="auth-logo-circle mb-3">
          EP
        </div>
        <div class="auth-title">Bienvenido a Establo Pro</div>
        <div class="auth-subtitle">
          Inicia sesión para gestionar tus hatos y animales.
        </div>
      </div>

      <form asp-action="Login" method="post" novalidate>
        <input type="hidden" asp-for="ReturnUrl" />

        <div class="mb-3">
          <label asp-for="UserName" class="form-label small text-uppercase text-muted mb-1"></label>
          <input asp-for="UserName" class="form-control" autocomplete="username" />
          <span asp-validation-for="UserName" class="text-danger small"></span>
        </div>

        <div class="mb-3">
          <label asp-for="Password" class="form-label small text-uppercase text-muted mb-1"></label>
          <div class="input-group">
            <input asp-for="Password" class="form-control" autocomplete="current-password" />
            <button class="btn btn-outline-light btn-sm" type="button" id="btnTogglePassword">
              Ver
            </button>
          </div>
          <span asp-validation-for="Password" class="text-danger small"></span>
        </div>

        <button type="submit" class="btn btn-primary w-100 mb-3">
          Entrar
        </button>

        <div class="d-flex justify-content-between align-items-center auth-secondary-link">
          <span class="text-muted">¿No tienes usuario aún?</span>
          <a asp-controller="Account" asp-action="Register" class="link-light text-decoration-none">
            Crear usuario
          </a>
        </div>
      </form>
    </div>
  </div>
</div>

@section Scripts {
<partial name="_ValidationScriptsPartial" />
<script>
  (function () {
    const btn = document.getElementById('btnTogglePassword');
    const input = document.getElementById('@Html.IdFor(m => m.Password)');

    if (btn && input) {
      btn.addEventListener('click', function () {
        const isPassword = input.getAttribute('type') === 'password';
        input.setAttribute('type', isPassword ? 'text' : 'password');
        btn.textContent = isPassword ? 'Ocultar' : 'Ver';
      });
    }
  })();
</script>
}
